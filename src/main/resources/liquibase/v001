create user admin with password 'password';

create database store_it owner admin;

create table if not exists books(
                                    id serial primary key ,
                                    name varchar(32),
                                    author varchar(32),
                                    snippet text,
                                    path varchar(32),
                                    cost int,
                                    genre varchar(32),
                                    actual boolean default true
);

create table if not exists "user"
(
    id             serial primary key,
    firstName      varchar(32),
    lastName       varchar(32),
    role           varchar(32),
    email          varchar(32),
    phone          varchar(32),
    achievementsId integer,
    cash           integer,
    actual         boolean,
    password       varchar(32)
);

create table if not exists achievements(
    id serial primary key,
    name varchar(32),
    count integer,
    image varchar(64)
);

create table if not exists user_achievements(
    id serial primary key ,
    user_id integer,
    achievements_id integer
);

alter table user_achievements
    add constraint user_achievements
        foreign key (user_id) references "user";

alter table user_achievements
    add constraint achievements_user
        foreign key (achievements_id) references achievements;

create table if not exists course
(
    id             serial primary key,
    name           varchar(32),
    descriptionEng text,
    descriptionRus text,
    imgPath        varchar(64)
)

create table if not exists lesson
(
    id          serial primary key,
    name        varchar(32),
    contentPath varchar(64),
    description text,
    tasks       text,
    materials   text
)

create table if not exists course_lesson
(
    id        serial primary key,
    course_id integer,
    lesson_id integer
)

alter table course_lesson
    add constraint course_lesson
        foreign key (course_id) references course;

alter table course_lesson
    add constraint lesson_course
        foreign key (lesson_id) references lesson;
